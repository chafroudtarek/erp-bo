<div class="container-fluid">
  <div class="timesheets-header">
    <div class="hours-limit">{{ totalHours }} Hours</div>
    <div class="year-month-wrapper">
      <select [(ngModel)]="yearMonth" (change)="getEmployeeTimeSheets()">
        <option
          value="{{ yearMonth }}"
          *ngIf="!yearMonthItems || !yearMonthItems.length"
        >
          {{ yearMonth }}
        </option>

        <option value="{{ item?.title }}" *ngFor="let item of yearMonthItems">
          {{ item?.title }}
        </option>
      </select>
    </div>
    <div class="declaration-btn">
      <button class="approved" *ngIf="isApproved" [disabled]="isApproved">
        Approved
      </button>
      <button *ngIf="!isDeclared && !isApproved" (click)="createDeclaration()">
        Declare
      </button>
      <button
        class="declared"
        *ngIf="isDeclared && !isApproved"
        (click)="cancelDeclaration()"
      >
        Cancel
      </button>
    </div>
  </div>
  <table class="table table-striped">
    <thead>
      <th>date</th>
      <th>Note</th>
      <th>working hours</th>
    </thead>
    <tbody>
      <tr
        *ngFor="
          let ts of timesheets
            | paginate
              : { itemsPerPage: limit, currentPage: p, totalItems: total }
        "
      >
        <td>
          <label for="{{ ts?._id }}"> {{ formatedDate(ts?.date) }}</label>
        </td>
        <td>
          <input
            [disabled]="isApproved"
            type="text"
            class="form-control timesheet-input"
            value="{{ ts.note }}"
            [(ngModel)]="ts.note"
          />
        </td>
        <td>
          <input
            [disabled]="isApproved"
            class="form-control timesheet-input"
            type="number"
            value="{{ ts.workingHours }}"
            [(ngModel)]="ts.workingHours"
          />
        </td>
        <td>
          <mat-icon (click)="updateRecord(ts)">edit </mat-icon>
        </td>
      </tr>

      <!-- <tr>
        <td>
          <input
            class="form-control"
            type="datetime-local"
            value="{{ currentTimesheet.date }}"
            [(ngModel)]="currentTimesheet.date"
          />
        </td>
        <td>
          <input
            class="form-control"
            type="text"
            value="{{ currentTimesheet.note }}"
            [(ngModel)]="currentTimesheet.note"
          />
        </td>
        <td>
          <input
            class="form-control"
            type="number"
            value="{{ currentTimesheet.workingHours }}"
            [(ngModel)]="currentTimesheet.workingHours"
          />
        </td>
        <td>
          <mat-icon (onClick)="insertRecord()" [title]="'add'">
          </mat-icon>
        </td>
      </tr> -->
    </tbody>
  </table>
</div>
<pagination-controls
  (pageChange)="changePage($event)"
  previousLabel="Prev."
  nextLabel="Next"
></pagination-controls>

<!-- <div>
  <ul>
    <li
      *ngFor="
        let ts of timesheets
          
      "
    >
      <p>{{ ts.date }}</p>
    </li>
  </ul>
</div> -->
